# MCP Studio

ç®€ä½“ä¸­æ–‡ | [English](./README_EN.md)

ä¸€ä¸ªåŸºäº **Tauri 2 + Rust + React** çš„ MCP (Model Context Protocol) å®¢æˆ·ç«¯è°ƒè¯•å·¥å…·ï¼Œé‡‡ç”¨ **DDD + CQRS** æ¶æ„ï¼Œæ”¯æŒå¤šç§ä¼ è¾“åè®®ã€‚

## ä»€ä¹ˆæ˜¯ MCPï¼Ÿ

MCP (Model Context Protocol) æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œç”¨äºè¿æ¥ AI åº”ç”¨ä¸æ•°æ®æºã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ–¹å¼æ¥æš´éœ²å·¥å…·ã€èµ„æºå’Œæç¤ºè¯ç»™ AI åŠ©æ‰‹ä½¿ç”¨ã€‚

## MCP Studio æ˜¯ä»€ä¹ˆï¼Ÿ

MCP Studio æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ MCP å®¢æˆ·ç«¯è°ƒè¯•å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ï¼š

- ğŸ”— **è¿æ¥å’Œç®¡ç† MCP æœåŠ¡å™¨** - æ”¯æŒ SSEã€Streamable HTTP å’Œ Stdio ä¼ è¾“åè®®
- ğŸ› ï¸ **è°ƒè¯• MCP å·¥å…·** - æŸ¥çœ‹å¯ç”¨å·¥å…·ã€è¾“å…¥è¾“å‡ºæ¨¡å¼ï¼Œå®æ—¶è°ƒç”¨æµ‹è¯•
- ğŸ“Š **ç›‘æ§é€šä¿¡è¿‡ç¨‹** - å®Œæ•´è®°å½•è¯·æ±‚å“åº”ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- ğŸ’¾ **å†å²è®°å½•ç®¡ç†** - ä¿å­˜è°ƒç”¨å†å²ï¼Œæ”¯æŒé‡è¯•å’Œåˆ†æ
- ğŸ¯ **å®æ—¶çŠ¶æ€ç›‘æ§** - è¿æ¥çŠ¶æ€å®æ—¶æ˜¾ç¤ºï¼Œè‡ªåŠ¨é‡è¿æœºåˆ¶

## æ ¸å¿ƒåŠŸèƒ½

### MCP æœåŠ¡å™¨ç®¡ç†
- æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ MCP æœåŠ¡å™¨é…ç½®
- æ”¯æŒ SSE (Server-Sent Events) ä¼ è¾“åè®®
- æ”¯æŒ Streamable HTTP ä¼ è¾“åè®®
- æ”¯æŒ Stdio (æ ‡å‡†è¾“å…¥è¾“å‡º) ä¼ è¾“åè®®
- å®æ—¶è¿æ¥çŠ¶æ€ç›‘æ§å’Œå¿ƒè·³æ£€æµ‹
- è‡ªåŠ¨æ–­çº¿é‡è¿æœºåˆ¶

### å·¥å…·è°ƒè¯•ç³»ç»Ÿ
- è‡ªåŠ¨è·å–æœåŠ¡å™¨æä¾›çš„å·¥å…·åˆ—è¡¨
- æ˜¾ç¤ºå·¥å…·çš„è¯¦ç»†è¾“å…¥è¾“å‡º Schema
- åŠ¨æ€ç”ŸæˆåŸºäº Schema çš„å‚æ•°è¡¨å•
- å®æ—¶è°ƒç”¨å·¥å…·å¹¶æŸ¥çœ‹ç»“æœ
- æ”¯æŒ JSON Schema éªŒè¯

### é€šä¿¡ç›‘æ§
- å®Œæ•´è®°å½•æ‰€æœ‰ MCP è°ƒç”¨å†å²
- æ˜¾ç¤ºåŸå§‹è¯·æ±‚å’Œå“åº”æ•°æ®
- è®°å½•è°ƒç”¨è€—æ—¶å’Œé”™è¯¯ä¿¡æ¯
- æ”¯æŒæ•°æ®è¿‡æ»¤å’Œæœç´¢

### é«˜çº§ç‰¹æ€§
- **DDD + CQRS æ¶æ„** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤æ‰©å±•
- **å¤šåè®®æ”¯æŒ** - å…¼å®¹ä¸åŒç‰ˆæœ¬çš„ MCP åè®®
- **å®æ—¶äº‹ä»¶é€šçŸ¥** - è¿æ¥çŠ¶æ€å˜åŒ–å³æ—¶åé¦ˆ
- **æ•°æ®æŒä¹…åŒ–** - SQLite æœ¬åœ°å­˜å‚¨ï¼Œæ”¯æŒå†å²æŸ¥è¯¢
- **è·¨å¹³å°æ”¯æŒ** - macOSã€Windowsã€Linux å…¨å¹³å°è¦†ç›–

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- Rust >= 1.70
- å¹³å°ä¾èµ–ï¼š
  - macOS: Xcode Command Line Tools
  - Linux: `libwebkit2gtk-4.1-dev`, `libappindicator3-dev`
  - Windows: WebView2 Runtime

### å®‰è£…ä¸è¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/ä½ çš„ç”¨æˆ·å/tauri2-react-template.git
cd tauri2-react-template

# å®‰è£…ä¾èµ–
make install

# å¯åŠ¨å¼€å‘æ¨¡å¼
make dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
make build
```

## é¡¹ç›®ç»“æ„

```
mcp-studio/
â”œâ”€â”€ apps/desktop/
â”‚   â”œâ”€â”€ src/                          # React å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                   # shadcn/ui åŸºç¡€ç»„ä»¶åº“ (40+)
â”‚   â”‚   â”‚   â”œâ”€â”€ studio/               # MCP Studio æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudioLayout.tsx  # ä¸»ç•Œé¢å¸ƒå±€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ServerDock.tsx    # æœåŠ¡å™¨ç®¡ç†é¢æ¿
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolList.tsx      # å·¥å…·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolDetail.tsx    # å·¥å…·è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Workspace.tsx     # å·¥ä½œåŒº
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Inspector.tsx     # æ£€æŸ¥å™¨
â”‚   â”‚   â”‚   â””â”€â”€ LanguageSwitcher.tsx  # è¯­è¨€åˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useMcpServers.ts      # MCP æœåŠ¡å™¨ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ useMcpTools.ts        # MCP å·¥å…·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ lib/                      # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ query-client.ts       # TanStack Query é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts             # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ events.ts             # äº‹ä»¶ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ main.tsx                  # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â””â”€â”€ src-tauri/                    # Rust åç«¯ (DDD + CQRS)
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ domain/               # é¢†åŸŸå±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ cqrs.rs           # CQRS æ ¸å¿ƒ traits
â”‚       â”‚   â”‚   â”œâ”€â”€ mcp.rs            # MCP æ ¸å¿ƒé¢†åŸŸæ¨¡å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ config.rs         # é…ç½®ç®¡ç†
â”‚       â”‚   â”‚   â””â”€â”€ events.rs         # é¢†åŸŸäº‹ä»¶
â”‚       â”‚   â”œâ”€â”€ application/          # åº”ç”¨å±‚ (Handlers)
â”‚       â”‚   â”‚   â”œâ”€â”€ mcp_commands.rs   # MCP å‘½ä»¤å¤„ç†å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ mcp_queries.rs    # MCP æŸ¥è¯¢å¤„ç†å™¨
â”‚       â”‚   â”‚   â””â”€â”€ config_commands.rs
â”‚       â”‚   â”œâ”€â”€ infra/                # åŸºç¡€è®¾æ–½å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ mcp_client.rs     # MCP å®¢æˆ·ç«¯ç®¡ç†å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ sse_transport.rs  # SSE ä¼ è¾“å®ç°
â”‚       â”‚   â”‚   â”œâ”€â”€ repo_mcp.rs       # MCP ä»“å‚¨å®ç°
â”‚       â”‚   â”‚   â”œâ”€â”€ http.rs           # HTTP å®¢æˆ·ç«¯
â”‚       â”‚   â”‚   â””â”€â”€ db.rs             # æ•°æ®åº“åˆå§‹åŒ–
â”‚       â”‚   â”œâ”€â”€ interface/            # æ¥å£å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ commands.rs       # Tauri å‘½ä»¤
â”‚       â”‚   â”‚   â””â”€â”€ tray.rs           # ç³»ç»Ÿæ‰˜ç›˜
â”‚       â”‚   â””â”€â”€ main.rs               # åº”ç”¨å…¥å£
â”‚       â””â”€â”€ migrations/               # æ•°æ®åº“è¿ç§»
â”‚           â””â”€â”€ 20250101000000_init.sql
â”‚
â”œâ”€â”€ docs/                             # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ Makefile                          # å¸¸ç”¨å‘½ä»¤
```

## æ¶æ„è®¾è®¡

### DDD å››å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Interface Layer                          â”‚
â”‚              (Tauri Commands, System Tray)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Application Layer                         â”‚
â”‚           (CommandHandlers, QueryHandlers)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Domain Layer                            â”‚
â”‚    (Entities, Commands, Queries, Repository Traits)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Infrastructure Layer                       â”‚
â”‚      (SQLite Repositories, HTTP Client, Logging)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CQRS æ¨¡å¼

æœ¬æ¨¡æ¿å®ç°äº†å®Œæ•´çš„ CQRS æ¨¡å¼ï¼š

```rust
// å‘½ä»¤ (å†™æ“ä½œ)
pub struct CreateUserCmd { ... }
impl Command for CreateUserCmd {}

// æŸ¥è¯¢ (è¯»æ“ä½œ)
pub struct ListUsersQuery;
impl Query for ListUsersQuery {}

// å‘½ä»¤å¤„ç†å™¨
impl CommandHandler<CreateUserCmd, User> for UserCommandHandler { ... }

// æŸ¥è¯¢å¤„ç†å™¨
impl QueryHandler<ListUsersQuery, Vec<User>> for UserQueryHandler { ... }
```

### æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    invoke()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    handle()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Tauri    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Command/   â”‚
â”‚  Frontendâ”‚                â”‚  Command  â”‚                â”‚  Query      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  Handler    â”‚
     ^                                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                                          â”‚
     â”‚                                                          v
     â”‚         Event                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Repository   â”‚
                                                        â”‚  (SQLite)     â”‚
                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| React 18 | UI æ¡†æ¶ |
| TypeScript | ç±»å‹å®‰å…¨ |
| Vite | æ„å»ºå·¥å…· |
| TanStack Query | æœåŠ¡ç«¯çŠ¶æ€ç®¡ç† |
| Zustand | å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç† |
| React Router | è·¯ç”± |
| shadcn/ui | UI ç»„ä»¶åº“ |
| Tailwind CSS | æ ·å¼ |
| i18next | å›½é™…åŒ– |
| React Hook Form + Zod | è¡¨å•éªŒè¯ |

## åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Rust | ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ |
| Tauri 2 | æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| SQLx | å¼‚æ­¥æ•°æ®åº“æ“ä½œ |
| SQLite | æœ¬åœ°æ•°æ®åº“ |
| Tokio | å¼‚æ­¥è¿è¡Œæ—¶ |
| Serde | åºåˆ—åŒ– |
| Tracing | æ—¥å¿—ç³»ç»Ÿ |

## å¸¸ç”¨å‘½ä»¤

```bash
make install    # å®‰è£…ä¾èµ–
make dev        # å¯åŠ¨å¼€å‘æ¨¡å¼
make build      # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
make clean      # æ¸…ç†æ„å»ºäº§ç‰©
make status     # æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
```

## æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./docs/getting_started.md)
- [æ¶æ„è®¾è®¡](./docs/architecture/architecture_overview.md)
- [å¼€å‘æŒ‡å—](./docs/zh/development.md)
- [æ›´æ–°æ—¥å¿—](./docs/changelog.md)

## è®¸å¯è¯

[MIT License](./LICENSE)
